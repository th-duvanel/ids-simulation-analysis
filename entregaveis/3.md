# Metodologia da Pesquisa (Revisada)

Esta seção detalha o plano experimental projetado para responder à pergunta de pesquisa sobre o impacto da saturação de pacotes na eficácia e no desempenho de um NIDS. A metodologia foi expandida para incluir uma análise paramétrica mais robusta e um conjunto mais rico de métricas de saída.

### 1. Tipo de Pesquisa

A pesquisa mantém-se como **experimental e quantitativa**. Será utilizado um ambiente de simulação de redes (NS3) para executar uma série de experimentos controlados. O objetivo é coletar dados numéricos para estabelecer correlações estatísticas entre as variáveis de entrada (carga de tráfego e capacidade do NIDS) e as métricas de desempenho de rede e segurança.

### 2. Ambiente e Topologia

* **Software:** Simulador NS3 (Network Simulator 3).
* **Topologia:** Será utilizada uma topologia "estrela" (ou "dumbbell") que força o tráfego a passar por um gargalo central.
    * **Roteador/NIDS (Hub):** 1 nó central que representa o NIDS.
    * **Servidor (Destino):** 1 nó servidor que atua como destino final para todo o tráfego.
    * **Clientes (Spokes):** Um total de 7 nós clientes, categorizados por função:
        * 5 Nós de "Tráfego de Fundo": Geram tráfego UDP de inundação (o "ruído" de $pps$).
        * 1 Nó "Atacante": Gera um fluxo UDP de baixa taxa (o "sinal" de ataque).
        * 1 Nó "Legítimo": Gera um fluxo TCP (ex: download de arquivo) para medir a Qualidade de Serviço (QoS).

### 3. Modelagem do Gargalo (NIDS)

O NIDS é modelado como um gargalo duplo de processamento, refletindo as limitações do mundo real:

1.  **Limite de Banda (DataRate):** A capacidade de processamento do NIDS (ex: 30 Mbps, 100 Mbps) é modelada definindo o `DataRate` dos links de entrada do roteador.
2.  **Limite de Buffer (QueueSize):** A capacidade de enfileiramento do NIDS (ex: 50 pacotes) é modelada definindo o `MaxSize` da `DropTailQueue` nesses mesmos links.

Esta abordagem permite que a simulação sature o NIDS tanto por excesso de $bps$ quanto por excesso de $pps$, causando o descarte de pacotes (`Packet Drop`).

### 4. Variáveis de Entrada (Independentes)

Para produzir um artigo completo, o experimento irá variar sistematicamente os seguintes parâmetros de entrada:

#### VI Primária (Eixo X dos Gráficos)
* **`taxa_pps_total`:** A taxa de pacotes de fundo agregada (controlada via `--taxaPpsFundo`). Esta é a principal variável usada para aplicar estresse ao sistema.

#### VIs Paramétricas (Usadas para criar os Estudos)
* **`nidsDataRate`:** A capacidade de processamento do NIDS (ex: "30Mbps", "100Mbps"). Permite comparar NIDS de baixo e alto custo.
* **`tamanho_pacote_fundo`:** O tamanho dos pacotes de fundo (ex: 128 bytes vs. 1400 bytes). Permite diferenciar o impacto de $pps$ vs. $bps$.
* **`tamanho_fila_nids`:** O tamanho do buffer do NIDS (ex: "50p", "100p", "250p"). Permite analisar a resiliência do NIDS.

### 5. Coleta e Métricas de Saída (Dependentes)

Os dados serão coletados usando uma combinação de `TraceConnect` (para drops na fila), `PacketSink` (para goodput) e o módulo `FlowMonitor` (para latência).

* **1. Pacotes Dropados (`taxa_descarte_geral`):**
    * **O que mede:** A saturação geral do NIDS.
    * **Como é medida:** `TraceConnect("Drop")` na(s) fila(s) de entrada do NIDS.
    * **Cálculo:** `(Total de Pacotes Descartados / Total de Pacotes Enfileirados)`

* **2. Falsos Negativos (`taxa_falsos_negativos`):**
    * **O que mede:** A falha de segurança do NIDS (ataques não vistos).
    * **Como é medida:** Dentro do *callback* "Drop", inspecionamos o pacote. Se for um pacote de ataque (porta UDP específica), ele é contado como um Falso Negativo (assumindo que um pacote dropado não é inspecionado).
    * **Cálculo:** `(Pacotes de Ataque Descartados / Total de Pacotes de Ataque Enviados)`

* **3. Goodput (`throughput_legitimo_mbps`):**
    * **O que mede:** A Qualidade de Serviço (QoS) para o usuário legítimo.
    * **Como é medida:** Medindo o total de bytes recebidos pelo `PacketSink` do fluxo TCP do "Cliente Legítimo" ao longo do tempo.
    * **Cálculo:** `(Total de Bytes TCP Recebidos * 8) / (Tempo de Simulação * 1.000.000)`

* **4. Latência (`latencia_media_s`):**
    * **O que mede:** O atraso médio da rede para o usuário legítimo.
    * **Como é medida:** O `FlowMonitor` do NS3 é instalado para monitorar todos os fluxos. Após a simulação, os dados do fluxo TCP legítimo são extraídos.
    * **Cálculo:** `(Soma dos Atrasos de todos os pacotes TCP / Total de Pacotes TCP Recebidos)`
    
### 6. Plano Experimental (Estudos de Análise)

O experimento será dividido em múltiplos estudos, cada um comparado contra um **Cenário de Controle (Baseline)** que usa uma `DataRate` e `MaxSize` funcionalmente infinitas ("10Gbps", "1000000p") para garantir zero descartes.

* **Estudo 1: A Natureza da Carga (PPS vs. BPS)**
    * **Pergunta:** O que satura o NIDS mais rápido: pacotes pequenos (Alto-PPS) ou grandes (Alto-BPS), mantendo a taxa de $pps$ total constante?
    * **Variáveis:** Varia `tamanho_pacote_fundo` (128B vs 1400B).
    * **Métricas Focais:** `taxa_descarte_geral`, `taxa_falsos_negativos`.

* **Estudo 2: Resiliência da Fila (Buffer)**
    * **Pergunta:** Aumentar o buffer (tamanho da fila) do NIDS melhora a detecção de ataques?
    * **Variáveis:** Varia `tamanho_fila_nids` ("50p", "100p", "250p"), mantendo o pior caso (pacotes pequenos).
    * **Métricas Focais:** `taxa_falsos_negativos`, `throughput_legitimo_mbps`.

* **Estudo 3: Custo-Benefício (Capacidade)**
    * **Pergunta:** Qual o impacto de investir em um NIDS "mais caro" (maior capacidade de banda)?
    * **Variáveis:** Varia `nidsDataRate` ("30Mbps" vs "100Mbps").
    * **Métricas Focais:** Todas as quatro métricas, comparando o ponto em que o sistema "quebra" em ambos os cenários.